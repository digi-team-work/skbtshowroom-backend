jQuery(document).ready((function(){!function(){var e=document.querySelector("#happyfiles-settings-content");if(e){for(var t=document.querySelectorAll("#happyfiles-settings-tabs a"),a=e.querySelectorAll("table"),i=0;i<t.length;i++)t[i].addEventListener("click",(function(e){e.preventDefault();var a=e.target.getAttribute("data-tab-id");if(a){location.hash=a,window.scrollTo({top:0});for(var i=0;i<t.length;i++)t[i].classList.remove("nav-tab-active");e.target.classList.add("nav-tab-active"),l(a)}}));var r=location.hash.replace("#","");if(r){var s=document.querySelector('[data-tab-id="'+r+'"]');s&&s.click()}}function l(e){document.getElementById(e);for(var t=0;t<a.length;t++){var i=a[t];i.getAttribute("id")===e?i.classList.add("active"):i.classList.remove("active")}}}(),jQuery(document).on("click",".happyfiles-import",(function(e){e.preventDefault();var t=e.target.getAttribute("data-plugin");if(t){var a=-1!==["filebird","real-media-library"].indexOf(t)?"happyfiles_import_third_pary_tables":"happyfiles_import_third_party_terms";e.target.querySelector(".spinner").classList.add("is-active"),e.target.disabled=!0,jQuery.ajax({method:"POST",url:HappyFiles.ajaxUrl,data:{action:a,plugin:t},success:function(i){if(HappyFiles.debug&&console.warn("import",a,t,i.data),i.success){if(e.target.remove(),i.data.hasOwnProperty("message")){var r=document.getElementById(t).querySelector(".message");r?(r.classList.add("success"),r.innerHTML=i.data.message):alert(i.data.message)}}else e.target.querySelector(".spinner").classList.remove("is-active"),e.target.removeAttribute("disabled"),i.data.hasOwnProperty("message")&&alert(i.data.message)}})}})),jQuery(document).on("click",".happyfiles-delete",(function(e){e.preventDefault();var t=e.target.getAttribute("data-plugin");if(t){e.target.querySelector(".spinner").classList.add("is-active"),e.target.disabled=!0;var a=-1!==["filebird","real-media-library"].indexOf(t)?"happyfiles_delete_third_pary_tables":"happyfiles_delete_third_party_terms";jQuery.ajax({method:"POST",url:HappyFiles.ajaxUrl,data:{action:a,plugin:t},success:function(i){HappyFiles.debug?console.warn("delete",a,t,i.data):i.success?location.reload():(e.target.querySelector(".spinner").classList.remove("is-active"),e.target.removeAttribute("disabled"))}})}})),jQuery(document).on("click","#happyfiles-delete-plugin-data",(function(e){e.preventDefault(),confirm(HappyFiles.i18n.deletePluginData)&&jQuery.ajax({method:"POST",url:HappyFiles.ajaxUrl,data:{action:"happyfiles_delete_plugin_data"},success:function(e){e.data.hasOwnProperty("message")&&alert(e.data.message),HappyFiles.debug?console.warn(e):e.data.hasOwnProperty("optionsDeleted")&&e.data.optionsDeleted.length&&location.reload()}})})),jQuery(document).on("click","#happyfiles-deactivate-license",(function(e){e.preventDefault(),e.target.setAttribute("disabled","disabled"),jQuery.ajax({method:"POST",url:HappyFiles.ajaxUrl,data:{action:"happyfiles_deactivate_license"},success:function(t){e.target.removeAttribute("disabled"),t.data.hasOwnProperty("message")&&alert(t.data.message),t.success&&location.reload()}})})),jQuery(document).on("click","#happyfiles-regenerate-filesizes",(function(e){e.preventDefault();var t=e.target.dataset.attachmentIds;if(t){e.target.setAttribute("disabled","disabled"),t=t.split(",");var a=document.getElementById("happyfiles-regenerate-filesizes-results");t.forEach((function(i,r){jQuery.ajax({method:"POST",url:HappyFiles.ajaxUrl,data:{action:"happyfiles_regenerate_filesize",attachmentId:i},success:function(i){if(a){var s=a.innerHTML;t.length-1===r?(s='<li class="done">Done ('+t.length+")!</li>"+s,e.target.removeAttribute("disabled")):s="<li>"+i.data.id+": "+i.data.filesize+" ("+i.data.name+")</li>"+s,a.innerHTML=s}}})}))}}))}));